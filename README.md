# RankSystem for Unity

## Установка

1. Зарегестрироватья на сайте ...
2. Создать проект приложения в кабинете иполусить GameKey
3. Скачать ranksystem.unitypackage и импортирвать его в ваш Unity проект
4. Перенести префаб RankSystem на сцену
5. Вставить GameKey в соотведсвующее поле RankSystem
6. Нажать кнопку "Test connection" для проверки праильности настройки

## Работа с плагином

### Общая информация

Для обрабоки результатов вашего запроса используэться callback функция которая вернет

- status(bool) - удачность оперции
- msg(JObject) - результат запроса (при status == true) либо сообщение ошибки(при status == false);

Возможние ошибки:

- ER_EXTERNAL_ERROR
- ER_INVALID_LOGIN
- ER_NAME_IS_TAKEN
- ER_INVALID_SESSION
- ER_INVALID_GAMEKEY
- ER_INVALID_FIELDS

### Регистрация

Для регистрации нового пользователя необходимо визвать функию Register передав в качесте параметров логин и пароль:

```cs
RankSystem.instanse.Register(login, password, (msg, status) =>
{
  //Ваши действия...
};
```

Также при регистрации можно задать дополнительние параметры(например пол или возраст) для чего необходимо создать JObject с соотвдствующими парметрами и указать последним параметром при визова функции Register

```cs
RankSystem.instanse.Register(login, password, (msg, status) =>
{
  //Ваши действия...
}, jObject);
```

### Авторизация

Плагин позволяет провести авторизацию пользаваля с помощью фунции Auth в которую необходимо передать логин и пароль. При удачной авторизации в msg будут получени все параметри рользователя в качестве JObject.

```cs
RankSystem.instanse.Auth(login, password, (msg, status) =>
{
  //Ваши действия...
});
```

### Робота с данными

- Отправка пользовательских данних

  Данные отправляються в качестве JSON файлов. По этому для отправки собственных данних необходисо создать JObject и передать его как параметр функции SendData:

```cs
JObject jObject = new JObject();
jObject["stringData"] = "Hello";
jObject["intData"] = 404;
jObject["boolData"] = true;
RankSystem.instanse.SendData(jObject, (msg, status) =>
  {
    //Ваши действия...
  });
```

- Отправка рейтинга

  Работает аналогично отпрвке пользовательских данних за исключением того, что необходимо передать значение float в функцию SendRating:

  ```cs
  float temp = 505.5;
  RankSystem.instanse.SendRating(temp, (msg, status) =>
  {
    //Ваши действия...
  });
  ```

- Получение данных

  Если вам неоходимо получить пользовательские данные в процессе игры(параметри при регистрации, пользовательские данные, ваш рейтинг), вы можете воспользоваться функцией GettingData, в реузьтати которой вы получите JObject со всеми параметрами:

  ```cs
  RankSystem.instanse.GettingData((result, status) =>
  {
    //Ваши действия...
  });
  ```

- Получение рейтинга пользователя

  Для состоаления рейтинга всех пользователей реализована функция GetRating, в которую необходимо передать количество необходимих записей. Если текущий пользователь не попадаєт в выборку он автоматически добавиться в конец списка вместе с местом в рейтинге.

```cs
RankSystem.instanse.GetRating(0, (msg, status) =>
{
    //Ваши действия...
});
```
